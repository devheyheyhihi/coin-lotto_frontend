{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/coin_lotto/frontend/src/app/room/%5BroomId%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { ethers } from 'ethers';\nimport Link from 'next/link';\nimport { useParams, useRouter } from 'next/navigation';\nimport lotteryABIFile from '../../../abis/Lottery.json';\n\n// --- Constants ---\nconst BNB_CHAIN_ID = '0x61';\nconst USDT_CONTRACT_ADDRESS = '0x337610d27c682E347C9cD60BD4b3b107C9d34dDd';\nconst API_BASE_URL = 'http://localhost:3001';\nconst usdtABI = [\n    \"function approve(address spender, uint256 amount) public returns (bool)\",\n    \"function allowance(address owner, address spender) public view returns (uint256)\",\n    \"function balanceOf(address account) public view returns (uint256)\",\n    \"function transfer(address to, uint256 amount) public returns (bool)\",\n    \"function transferFrom(address from, address to, uint256 amount) public returns (bool)\",\n    \"function name() public view returns (string)\",\n    \"function symbol() public view returns (string)\",\n    \"function decimals() public view returns (uint8)\"\n];\nconst lotteryABI = lotteryABIFile.abi;\n\n// --- Type Definitions ---\ndeclare global { interface Window { ethereum?: any; }}\n\ninterface LogEntry {\n    id: number;\n    type: 'JOIN' | 'SYSTEM' | 'WINNER' | 'ERROR' | 'INFO' | 'PROCESS';\n    message: string;\n    timestamp: string;\n}\n\ninterface LotteryRound {\n    id: number; // This is now the room_round_id\n    globalRoundId: number;\n    status: 'OPEN' | 'DRAWING' | 'CLOSED';\n    players: string[];\n    players_snapshot: string | null;\n    winner: string | null;\n    prizePool: string | null;\n    logs: LogEntry[];\n    // These are added from the backend's room config\n    name: string;\n    ticketPrice: string;\n    contractAddress: string;\n}\n\ninterface RoomConfig {\n    name: string;\n    ticketPrice: string;\n    contractAddress: string;\n}\n\n// --- Main Component ---\nexport default function RoomPage() {\n    const params = useParams();\n    const router = useRouter();\n    const roomId = params.roomId as string;\n\n    const [account, setAccount] = useState<string | null>(null);\n    const [isCorrectNetwork, setIsCorrectNetwork] = useState(false);\n    const [isOwner, setIsOwner] = useState(false);\n    const [isProcessing, setIsProcessing] = useState(false);\n    const [lotteryStatus, setLotteryStatus] = useState<LotteryRound | null>(null);\n    const [roomConfig, setRoomConfig] = useState<RoomConfig | null>(null);\n    const [displayedLogs, setDisplayedLogs] = useState<LogEntry[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [isAnimationRunning, setIsAnimationRunning] = useState(false);\n    const [hasAnimationRun, setHasAnimationRun] = useState(false);\n\n    const prevRoundIdRef = useRef<number | null>(null);\n    const logContainerRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (lotteryStatus && lotteryStatus.globalRoundId !== prevRoundIdRef.current) {\n            setHasAnimationRun(false);\n            prevRoundIdRef.current = lotteryStatus.globalRoundId;\n        }\n    }, [lotteryStatus]);\n\n    useEffect(() => {\n        if (logContainerRef.current) {\n            logContainerRef.current.scrollTop = logContainerRef.current.scrollHeight;\n        }\n    }, [displayedLogs]);\n\n    const addFrontendLog = useCallback((type: LogEntry['type'], message: string) => {\n        const newLog: LogEntry = { id: Math.random() * -100000, type, message, timestamp: new Date().toISOString() };\n        setDisplayedLogs(prev => [...prev, newLog]);\n    }, []);\n\n    const fetchStatus = useCallback(async () => {\n        if (isAnimationRunning || !roomId) return;\n        try {\n            const response = await fetch(`${API_BASE_URL}/lottery-status/${roomId}`);\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.message || 'Failed to fetch lottery status.');\n            }\n            const data: LotteryRound = await response.json();\n            setLotteryStatus(data);\n\n            if (!roomConfig) {\n                setRoomConfig({\n                    name: data.name,\n                    ticketPrice: data.ticketPrice,\n                    contractAddress: data.contractAddress,\n                });\n            }\n\n            setDisplayedLogs(prevLogs => {\n                const existingIds = new Set(prevLogs.map(l => l.id));\n                let newLogs = data.logs.filter(log => !existingIds.has(log.id));\n                if (data.status === 'DRAWING' || isAnimationRunning) {\n                   newLogs = newLogs.filter(log => log.type !== 'WINNER');\n                }\n                return [...prevLogs, ...newLogs].sort((a,b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n            });\n        } catch (error: any) {\n            setError(error.message);\n        }\n    }, [isAnimationRunning, roomId, roomConfig]);\n\n    const checkNetwork = useCallback(async () => {\n        if (window.ethereum) {\n            const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n            setIsCorrectNetwork(chainId === BNB_CHAIN_ID);\n        }\n    }, []);\n\n    const checkOwner = useCallback(async (currentAccount: string) => {\n        if (window.ethereum && currentAccount && isCorrectNetwork && roomConfig?.contractAddress) {\n            const provider = new ethers.BrowserProvider(window.ethereum);\n            const contract = new ethers.Contract(roomConfig.contractAddress, lotteryABI, provider);\n            try {\n                const ownerAddress = await contract.owner();\n                setIsOwner(ownerAddress.toLowerCase() === currentAccount.toLowerCase());\n            } catch (e) {\n                console.error(\"Couldn't check owner status: \", e);\n                setIsOwner(false);\n            }\n        } else {\n            setIsOwner(false);\n        }\n    }, [isCorrectNetwork, roomConfig]);\n\n    useEffect(() => {\n        const handleAccountsChanged = (accounts: string[]) => {\n            const newAccount = accounts.length > 0 ? accounts[0] : null;\n            setAccount(newAccount);\n        };\n        if (window.ethereum) {\n            window.ethereum.on('accountsChanged', handleAccountsChanged);\n            window.ethereum.on('chainChanged', checkNetwork);\n            (async () => {\n                const accounts = await window.ethereum.request({ method: 'eth_accounts' });\n                handleAccountsChanged(accounts);\n                await checkNetwork();\n            })();\n            return () => {\n                window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\n                window.ethereum.removeListener('chainChanged', checkNetwork);\n            };\n        }\n    }, [checkNetwork]);\n\n    useEffect(() => {\n        if (account && isCorrectNetwork && roomConfig) {\n            checkOwner(account);\n        } else {\n            setIsOwner(false);\n        }\n    }, [account, isCorrectNetwork, roomConfig, checkOwner]);\n    \n    useEffect(() => {\n        if (lotteryStatus?.status === 'DRAWING' && !isAnimationRunning && !hasAnimationRun) {\n            setIsAnimationRunning(true);\n            setHasAnimationRun(true);\n            const runDrawingSequence = async () => {\n                addFrontendLog('SYSTEM', 'Draw starting in 3...');\n                await new Promise(res => setTimeout(res, 1000));\n                addFrontendLog('SYSTEM', 'Draw starting in 2...');\n                await new Promise(res => setTimeout(res, 1000));\n                addFrontendLog('SYSTEM', 'Draw starting in 1...');\n                await new Promise(res => setTimeout(res, 1000));\n                \n                const players = lotteryStatus.players_snapshot ? JSON.parse(lotteryStatus.players_snapshot) : [];\n                if (players.length > 0) {\n                    const animationDuration = 5000;\n                    const startTime = Date.now();\n                    const animationInterval = setInterval(() => {\n                         if (Date.now() - startTime > animationDuration) {\n                            clearInterval(animationInterval);\n                            const closeRound = async () => {\n                                addFrontendLog('SYSTEM', 'Verification complete. Announcing winner...');\n                                const winnerLog = lotteryStatus.logs.find(l => l.type === 'WINNER');\n                                if (winnerLog) setDisplayedLogs(prev => [...prev, winnerLog]);\n                                else if (lotteryStatus.winner) addFrontendLog('WINNER', `🎉 Congratulations to the winner: ${lotteryStatus.winner}`);\n                                await new Promise(res => setTimeout(res, 3000));\n                                addFrontendLog('SYSTEM', 'This round is now closed. A new round will begin shortly.');\n                                for (let i = 5; i > 0; i--) {\n                                    addFrontendLog('SYSTEM', `Clearing board in ${i}...`);\n                                    await new Promise(res => setTimeout(res, 1000));\n                                }\n                                setDisplayedLogs([]);\n                                setIsAnimationRunning(false);\n                            };\n                            closeRound();\n                        } else {\n                            const randomIndex = Math.floor(Math.random() * players.length);\n                            addFrontendLog('PROCESS', `Verifying: ${players[randomIndex]}`);\n                        }\n                    }, 10);\n                } else {\n                     addFrontendLog('ERROR', 'No participants in the draw.');\n                     setIsAnimationRunning(false);\n                }\n            };\n            runDrawingSequence();\n        }\n    }, [lotteryStatus, isAnimationRunning, hasAnimationRun, addFrontendLog]);\n\n    useEffect(() => {\n        fetchStatus();\n        const interval = setInterval(() => {\n            if (!isAnimationRunning) fetchStatus();\n        }, 3000);\n        return () => clearInterval(interval);\n    }, [fetchStatus, isAnimationRunning]);\n\n    const connectWallet = async () => {\n        if (!window.ethereum) return setError('Please install MetaMask.');\n        try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n            setAccount(accounts[0]);\n        } catch (error) { setError('Failed to connect wallet.'); }\n    };\n\n    const handleParticipate = async () => {\n        if (!account || !isCorrectNetwork || !roomConfig) return;\n        setIsProcessing(true);\n        setError(null);\n        try {\n            const provider = new ethers.BrowserProvider(window.ethereum);\n            const signer = await provider.getSigner();\n            const usdtContract = new ethers.Contract(USDT_CONTRACT_ADDRESS, usdtABI, signer);\n            const lotteryContract = new ethers.Contract(roomConfig.contractAddress, lotteryABI, signer);\n            const participationFee = ethers.parseUnits(roomConfig.ticketPrice, 18);\n            \n            const balance = await usdtContract.balanceOf(account);\n            if (balance < participationFee) throw new Error(`Insufficient USDT balance.`);\n            \n            const allowance = await usdtContract.allowance(account, roomConfig.contractAddress);\n            if (allowance < participationFee) {\n                const approveTx = await usdtContract.approve(roomConfig.contractAddress, ethers.MaxUint256);\n                await approveTx.wait();\n            }\n            \n            const participateTx = await lotteryContract.participate();\n            await participateTx.wait();\n            \n            await fetch(`${API_BASE_URL}/participate/${roomId}`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ userAddress: account })\n            });\n            await fetchStatus();\n        } catch (error: any) {\n            setError(`Participation failed: ${error.reason || error.message}`);\n        } finally {\n            setIsProcessing(false);\n        }\n    };\n    \n    return (\n        <div className=\"flex h-screen bg-gray-900 text-white font-sans\">\n            {isProcessing && (\n                <div className=\"absolute inset-0 bg-black bg-opacity-70 flex flex-col justify-center items-center z-50\">\n                    <div className=\"w-16 h-16 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin\"></div>\n                    <p className=\"mt-4 text-white text-xl font-semibold\">Processing Transaction...</p>\n                </div>\n            )}\n            <div className=\"w-1/3 border-r border-gray-700 flex flex-col p-4\">\n                 <div className=\"mb-4\">\n                    <Link href=\"/\" className=\"text-blue-400 hover:underline\">← Back to Lobby</Link>\n                </div>\n                <h1 className=\"text-3xl font-bold mb-4\">{roomConfig?.name || 'Loading Room...'}</h1>\n                <h2 className=\"text-xl font-semibold mb-2 text-gray-400\">Global Round #{lotteryStatus?.globalRoundId || '...'}</h2>\n                <div className=\"text-lg text-yellow-400 mb-4\">\n                    Prize Pool: <span className=\"font-bold\">{parseFloat(lotteryStatus?.prizePool || '0').toFixed(4)}</span> USDT\n                </div>\n                <div className=\"mb-4\">\n                    {account ? (\n                        <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm bg-green-500 rounded px-2 py-1\">{`${account.substring(0, 6)}...${account.substring(account.length - 4)}`}</span>\n                            {isOwner && <Link href={`/admin?roomId=${roomId}`} className=\"text-sm bg-red-600 rounded px-2 py-1\">Admin</Link>}\n                        </div>\n                    ) : (\n                        <button onClick={connectWallet} className=\"w-full bg-blue-600 p-2 rounded\">Connect Wallet</button>\n                    )}\n                </div>\n                {error && <p className=\"text-red-500 text-xs my-2\">{error}</p>}\n                <button\n                    onClick={handleParticipate}\n                    disabled={isProcessing || lotteryStatus?.status !== 'OPEN' || !account || !isCorrectNetwork}\n                    className=\"w-full bg-yellow-500 text-black font-bold p-3 rounded disabled:bg-gray-600\"\n                >\n                    {lotteryStatus?.status === 'OPEN' && roomConfig ? `Participate (${roomConfig.ticketPrice} USDT)` : `Round is ${lotteryStatus?.status || 'Loading...'}`}\n                </button>\n                <h2 className=\"text-xl font-bold mt-6 mb-2\">Participants ({lotteryStatus?.players?.length || 0})</h2>\n                <div className=\"bg-gray-800 rounded p-2 flex-grow overflow-y-auto\">\n                    {lotteryStatus?.players?.map((player, index) => <div key={index} className=\"text-sm truncate font-mono\">{player}</div>)}\n                </div>\n            </div>\n            <div className=\"w-2/3 flex flex-col h-full\">\n                <div ref={logContainerRef} className=\"flex-grow p-4 bg-black font-mono text-sm h-full overflow-y-auto\">\n                    {displayedLogs.map((log, i) => (\n                        <div key={log.id || i} className={`${\n                            log.type === 'WINNER' ? 'text-yellow-400 font-bold text-lg' \n                            : log.type === 'ERROR' ? 'text-red-500' \n                            : log.type === 'JOIN' ? 'text-blue-400'\n                            : log.type === 'PROCESS' ? 'text-green-400'\n                            : 'text-gray-400'\n                        }`}>\n                            <span className=\"text-gray-600 mr-2\">{new Date(log.timestamp).toLocaleTimeString()}</span>\n                            <span>{log.message}</span>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n} "],"names":[],"mappings":"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","debugId":null}}]
}