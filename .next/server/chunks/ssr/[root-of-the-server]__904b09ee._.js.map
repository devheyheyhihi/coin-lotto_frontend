{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/coin_lotto/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { ethers } from 'ethers';\nimport lotteryABI from '../abis/Lottery.json';\n\n// Extends the window object to use a browser wallet provider like MetaMask.\ndeclare global {\n  interface Window {\n    ethereum?: any;\n  }\n}\n\nconst BNB_CHAIN_ID = '0x61'; // Chain ID for BNB Smart Chain Testnet (97)\nconst LOTTERY_CONTRACT_ADDRESS = '0x08A2BD2c14d27baA653B0f0F2870C6bf23fe1FdD'; // Deployed contract address\nconst USDT_CONTRACT_ADDRESS = '0x337610d27c682E347C9cD60BD4b3b107C9d34dDd'; // USDT on BNB Testnet\n\nconst usdtABI = [\n    \"function approve(address spender, uint256 amount) public returns (bool)\",\n    \"function allowance(address owner, address spender) public view returns (uint256)\"\n];\n\nexport default function Home() {\n  const [account, setAccount] = useState<string | null>(null);\n  const [isCorrectNetwork, setIsCorrectNetwork] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false); // Generic processing state\n  const [isOwner, setIsOwner] = useState(false);\n  const [prizePool, setPrizePool] = useState<string>(\"0\");\n  const [players, setPlayers] = useState<string[]>([]);\n  const [winner, setWinner] = useState<string | null>(null);\n  const [highlightedIndex, setHighlightedIndex] = useState<number | null>(null);\n\n  const updateLotteryState = useCallback(async () => {\n    if (window.ethereum && isCorrectNetwork && account) {\n        try {\n            const provider = new ethers.BrowserProvider(window.ethereum);\n            const lotteryContract = new ethers.Contract(LOTTERY_CONTRACT_ADDRESS, lotteryABI, provider);\n\n            // Fetch prize pool, players, and owner\n            const [pool, playerList, ownerAddress] = await Promise.all([\n                lotteryContract.getPrizePool(),\n                lotteryContract.getPlayers(),\n                lotteryContract.owner()\n            ]);\n            \n            setPrizePool(ethers.formatUnits(pool, 18));\n            setPlayers(playerList);\n            setIsOwner(ownerAddress.toLowerCase() === account.toLowerCase());\n\n            // If there are no players, it means a new round has started, so clear the winner.\n            if (playerList.length === 0) {\n                setWinner(null);\n                setHighlightedIndex(null);\n            }\n        } catch (error) {\n            console.error(\"Error updating lottery state:\", error);\n            setIsOwner(false);\n            setPrizePool(\"0\");\n            setPlayers([]);\n        }\n    } else {\n        setIsOwner(false);\n        setPrizePool(\"0\");\n        setPlayers([]);\n    }\n  }, [isCorrectNetwork, account]);\n\n\n  const checkNetwork = useCallback(async () => {\n    if (window.ethereum) {\n      try {\n        const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n        setIsCorrectNetwork(chainId === BNB_CHAIN_ID);\n      } catch (error) {\n        console.error(\"Failed to check network:\", error);\n        setIsCorrectNetwork(false);\n      }\n    }\n  }, []);\n\n  const switchNetwork = async () => {\n    if (window.ethereum) {\n      try {\n        await window.ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{ chainId: BNB_CHAIN_ID }],\n        });\n      } catch (switchError: any) {\n        if (switchError.code === 4902) {\n          try {\n            await window.ethereum.request({\n              method: 'wallet_addEthereumChain',\n              params: [\n                {\n                  chainId: BNB_CHAIN_ID,\n                  chainName: 'BNB Smart Chain Testnet',\n                  rpcUrls: ['https://data-seed-prebsc-1-s1.binance.org:8545/'],\n                  nativeCurrency: { name: 'tBNB', symbol: 'tBNB', decimals: 18 },\n                  blockExplorerUrls: ['https://testnet.bscscan.com'],\n                },\n              ],\n            });\n          } catch (addError) {\n            console.error('Failed to add the network', addError);\n            alert('Failed to add BNB Smart Chain to MetaMask.');\n          }\n        } else if (switchError.code === -32002) {\n          alert('MetaMask popup is already open. Please check.');\n        } else {\n            alert('Failed to switch network. Please switch to BNB Smart Chain manually in MetaMask.');\n        }\n      }\n    }\n  };\n  \n  const handleParticipate = async () => {\n    if (!window.ethereum) {\n        alert('Please install MetaMask.');\n        return;\n    }\n\n    setIsProcessing(true);\n    try {\n        const provider = new ethers.BrowserProvider(window.ethereum);\n        const signer = await provider.getSigner();\n        \n        const usdtContract = new ethers.Contract(USDT_CONTRACT_ADDRESS, usdtABI, signer);\n        const lotteryContract = new ethers.Contract(LOTTERY_CONTRACT_ADDRESS, lotteryABI, signer);\n\n        const participationFee = ethers.parseUnits(\"0.01\", 18);\n        const currentAllowance = await usdtContract.allowance(await signer.getAddress(), LOTTERY_CONTRACT_ADDRESS);\n\n        if (currentAllowance < participationFee) {\n            const approveTx = await usdtContract.approve(LOTTERY_CONTRACT_ADDRESS, participationFee);\n            await approveTx.wait();\n        }\n\n        const participateTx = await lotteryContract.participate(); \n        await participateTx.wait();\n\n        alert(\"Participation successful!\");\n        await updateLotteryState();\n\n    } catch (error: any) {\n        console.error(\"Participation failed\", error);\n        if (error.code === 'ACTION_REJECTED') {\n            alert(\"Transaction was rejected.\");\n        } else {\n            alert(\"Participation failed. See console for details.\");\n        }\n    } finally {\n        setIsProcessing(false);\n    }\n  };\n  \n  const handlePickWinner = async () => {\n    if (players.length === 0) {\n        alert(\"No players to pick a winner from.\");\n        return;\n    }\n    \n    setIsProcessing(true);\n    setWinner(null);\n    setHighlightedIndex(null);\n\n    // --- Animation Part ---\n    const animationDuration = 4000; // 4 seconds\n    const shuffleInterval = 100; // Switch highlight every 100ms\n    let currentIndex = 0;\n    \n    const animationInterval = setInterval(() => {\n        setHighlightedIndex(currentIndex % players.length);\n        currentIndex++;\n    }, shuffleInterval);\n\n    // --- Blockchain Part (run in parallel) ---\n    const pickWinnerPromise = (async () => {\n        try {\n            const provider = new ethers.BrowserProvider(window.ethereum);\n            const signer = await provider.getSigner();\n            const lotteryContract = new ethers.Contract(LOTTERY_CONTRACT_ADDRESS, lotteryABI, signer);\n\n            const tx = await lotteryContract.pickWinner();\n            const receipt = await tx.wait();\n            \n            const winnerEvent = receipt.logs.find((e: any) => e.fragment && e.fragment.name === 'WinnerPicked');\n            return winnerEvent ? winnerEvent.args.winner : null;\n        } catch (error) {\n            console.error(\"Failed to pick winner\", error);\n            throw error;\n        }\n    })();\n\n    // Wait for animation to run its course, then finalize\n    setTimeout(async () => {\n        clearInterval(animationInterval);\n        try {\n            const finalWinner = await pickWinnerPromise;\n            if (finalWinner) {\n                const finalWinnerIndex = players.findIndex(p => p.toLowerCase() === finalWinner.toLowerCase());\n                setWinner(finalWinner);\n                setHighlightedIndex(finalWinnerIndex);\n                alert(`Winner has been picked successfully! Winner: ${finalWinner}`);\n            } else {\n                setHighlightedIndex(null);\n                alert(\"Winner picked, but couldn't retrieve address from event logs. Prize sent.\");\n            }\n            \n            // Wait a few seconds before clearing the board for the next round\n            setTimeout(() => {\n                updateLotteryState();\n                setIsProcessing(false);\n            }, 5000);\n\n        } catch (error: any) {\n            setHighlightedIndex(null);\n            alert(error?.data?.message || error.message || \"An unknown error occurred.\");\n            setIsProcessing(false); // Re-enable buttons on failure\n        }\n    }, animationDuration);\n  };\n\n  const connectWallet = async () => {\n    if (typeof window.ethereum !== 'undefined') {\n      try {\n        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n        setAccount(accounts[0]);\n      } catch (error: any) {\n        console.error(\"Error connecting to MetaMask\", error);\n        if (error.code === -32002) {\n            alert('MetaMask popup is already open. Please check.');\n        } else {\n            alert(\"Error connecting to MetaMask.\");\n        }\n      }\n    } else {\n      alert('Please install MetaMask.');\n    }\n  };\n\n  useEffect(() => {\n    const handleAccountsChanged = (accounts: string[]) => {\n      setAccount(accounts.length > 0 ? accounts[0] : null);\n      setIsOwner(false);\n    };\n\n    const handleChainChanged = () => {\n      checkNetwork();\n    };\n\n    if (window.ethereum) {\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\n      window.ethereum.on('chainChanged', handleChainChanged);\n\n      (async () => {\n        try {\n            const accounts = await window.ethereum.request({ method: 'eth_accounts' });\n            handleAccountsChanged(accounts);\n            await checkNetwork();\n        } catch (error) {\n            console.error(\"Error during initial check:\", error);\n        }\n      })();\n\n      return () => {\n        if (window.ethereum.removeListener) {\n            window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\n            window.ethereum.removeListener('chainChanged', handleChainChanged);\n        }\n      };\n    }\n  }, [checkNetwork]);\n\n  useEffect(() => {\n    if(isCorrectNetwork && account) {\n        updateLotteryState();\n        const interval = setInterval(updateLotteryState, 15000);\n        return () => clearInterval(interval);\n    }\n  }, [isCorrectNetwork, account, updateLotteryState]);\n\n  const getButtonProps = () => {\n    if (!account) {\n        return { onClick: connectWallet, disabled: false, text: 'Connect Wallet' };\n    }\n    if (!isCorrectNetwork) {\n        return { onClick: switchNetwork, disabled: false, text: 'Switch to BNB Testnet' };\n    }\n    return {\n        onClick: handleParticipate,\n        disabled: isProcessing,\n        text: isProcessing ? 'Processing...' : 'Participate (0.01 USDT)'\n    };\n  };\n\n  const buttonProps = getButtonProps();\n\n  return (\n    <main className=\"flex min-h-screen flex-col items-center justify-center bg-gray-900 text-white relative p-4\">\n      {isProcessing && (\n        <div className=\"absolute inset-0 bg-black bg-opacity-70 flex flex-col justify-center items-center z-50\">\n            <div className=\"w-16 h-16 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin\"></div>\n            <p className=\"mt-4 text-white text-xl font-semibold\">Processing Transaction...</p>\n        </div>\n      )}\n\n      <header className=\"absolute top-5 right-5\">\n        {account ? (\n          <div className=\"bg-green-500 text-white font-bold py-2 px-4 rounded-lg text-sm\">\n            {`${account.substring(0, 6)}...${account.substring(account.length - 4)}`}\n          </div>\n        ) : (\n          <button\n            onClick={connectWallet}\n            className=\"px-6 py-2 bg-blue-600 text-white font-bold text-lg rounded-lg hover:bg-blue-500 transition-colors\"\n          >\n            Connect Wallet\n          </button>\n        )}\n      </header>\n      \n      <div className=\"text-center w-full max-w-2xl\">\n        <h1 className=\"text-4xl md:text-5xl font-bold mb-4 tracking-wider\">Lotto Game</h1>\n        <div className=\"text-xl md:text-2xl text-yellow-400 font-semibold mb-8\">\n            Prize Pool: <span className=\"font-bold\">{parseFloat(prizePool).toFixed(4)}</span> USDT\n        </div>\n\n        <div className=\"w-full mb-8\">\n            <h2 className=\"text-2xl font-bold text-center mb-4\">Participants ({players.length})</h2>\n            <div className=\"bg-gray-800 rounded-lg p-4 h-60 overflow-y-auto border border-gray-700\">\n                {players.length > 0 ? (\n                players.map((player, index) => (\n                    <div\n                        key={index}\n                        className={`p-2 rounded truncate ${\n                            highlightedIndex === index\n                            ? 'bg-yellow-500 text-black font-bold'\n                            : 'text-gray-300'\n                        }`}\n                        title={player}\n                    >\n                        {player}\n                    </div>\n                ))\n                ) : (\n                <p className=\"text-gray-500 text-center pt-20\">No participants yet. Be the first!</p>\n                )}\n            </div>\n        </div>\n        \n        <div className=\"flex flex-col items-center\">\n            <button\n                onClick={buttonProps.onClick}\n                disabled={buttonProps.disabled}\n                className=\"px-8 py-4 bg-yellow-500 text-gray-900 font-bold text-lg md:text-2xl rounded-lg hover:bg-yellow-400 disabled:bg-gray-600 disabled:cursor-not-allowed w-full max-w-xs\"\n            >\n                {buttonProps.text}\n            </button>\n\n            {account && isCorrectNetwork && (\n                <button\n                    onClick={handlePickWinner}\n                    disabled={isProcessing}\n                    className=\"mt-6 px-6 py-3 bg-red-600 text-white font-bold text-base md:text-xl rounded-lg hover:bg-red-500 disabled:bg-gray-600 w-full max-w-xs\"\n                >\n                    {isProcessing ? 'Processing...' : 'Pick a Winner'}\n                </button>\n            )}\n\n            {account && !isCorrectNetwork && (\n                <p className=\"mt-4 text-yellow-400 animate-pulse\">\n                Please switch to the BNB Smart Chain Testnet to play.\n                </p>\n            )}\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}