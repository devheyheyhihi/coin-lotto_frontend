{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/coin_lotto/frontend/src/app/admin/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\nconst API_BASE_URL = 'http://localhost:3001';\n\ninterface WithdrawalRequest {\n    id: number;\n    user_address: string;\n    amount: number;\n    status: 'PENDING' | 'APPROVED' | 'REJECTED';\n    requested_at: string;\n    tx_hash: string | null;\n}\n\nconst AdminPage = () => {\n    // Withdrawal states\n    const [withdrawals, setWithdrawals] = useState<WithdrawalRequest[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [processingId, setProcessingId] = useState<number | null>(null);\n\n    // Draw states\n    const [isDrawProcessing, setIsDrawProcessing] = useState(false);\n    const [drawError, setDrawError] = useState<string | null>(null);\n    const [drawSuccessMessage, setDrawSuccessMessage] = useState<string | null>(null);\n\n    const fetchWithdrawals = useCallback(async () => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(`${API_BASE_URL}/admin/withdrawals`);\n            if (!response.ok) {\n                throw new Error('Failed to fetch withdrawal requests.');\n            }\n            const data = await response.json();\n            setWithdrawals(data);\n        } catch (err: any) {\n            setError(err.message);\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        fetchWithdrawals();\n    }, [fetchWithdrawals]);\n\n    const handleApprove = async (withdrawalId: number) => {\n        setProcessingId(withdrawalId);\n        setError(null);\n        try {\n            const response = await fetch(`${API_BASE_URL}/admin/withdrawals/approve`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ withdrawalId }),\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                throw new Error(data.message || 'Failed to approve withdrawal.');\n            }\n\n            alert(`Approval successful! TxHash: ${data.txHash}`);\n            fetchWithdrawals();\n\n        } catch (err: any) {\n            setError(`Failed to approve ID ${withdrawalId}: ${err.message}`);\n        } finally {\n            setProcessingId(null);\n        }\n    };\n\n    const handleStartDrawAll = async () => {\n        setIsDrawProcessing(true);\n        setDrawError(null);\n        setDrawSuccessMessage(null);\n        try {\n            const response = await fetch(`${API_BASE_URL}/start-draw-all`, { method: 'POST' });\n            const data = await response.json();\n\n            if (data.success) {\n                setDrawSuccessMessage(data.message || \"Draw process for all rooms has been initiated.\");\n            } else {\n                throw new Error(data.message || \"An unknown error occurred on the server.\");\n            }\n        } catch (err: any) {\n            console.error(\"Failed to start draws:\", err);\n            setDrawError(`Error: ${err.message}`);\n        } finally {\n            setIsDrawProcessing(false);\n        }\n      };\n\n    return (\n        <div className=\"min-h-screen bg-gray-900 text-white p-4 sm:p-6 md:p-8\">\n            <div className=\"max-w-5xl mx-auto\"> {/* 너비 약간 증가 */}\n                <header className=\"mb-8\">\n                    <h1 className=\"text-3xl font-bold text-yellow-400\">Admin Panel</h1>\n                </header>\n\n                {/* Section for Global Round Control */}\n                <div className=\"mb-12 bg-gray-800/50 rounded-lg shadow-lg p-6\">\n                    <h2 className=\"text-2xl font-semibold text-yellow-300 mb-4\">Global Round Control</h2>\n                    {drawError && <p className=\"text-red-400 mb-4 p-3 bg-red-900/50 rounded-md\">{drawError}</p>}\n                    {drawSuccessMessage && <p className=\"text-green-400 mb-4 p-3 bg-green-900/50 rounded-md\">{drawSuccessMessage}</p>}\n                    <button\n                        onClick={handleStartDrawAll}\n                        disabled={isDrawProcessing}\n                        className=\"px-6 py-3 bg-red-600 text-white font-bold text-lg rounded-lg hover:bg-red-500 disabled:bg-gray-600 disabled:cursor-wait\"\n                    >\n                        {isDrawProcessing ? 'Initiating Draws...' : 'Start Draw For All Rooms'}\n                    </button>\n                </div>\n\n                {/* Section for Withdrawal Requests */}\n                <div>\n                    <h2 className=\"text-2xl font-semibold text-yellow-300 mb-4\">Withdrawal Requests</h2>\n                    <p className=\"text-gray-400 mt-1 mb-4\">Approve pending withdrawal requests here.</p>\n                    \n                    {error && (\n                        <div className=\"bg-red-900/50 border border-red-700 text-red-300 p-3 rounded-md mb-6\">\n                            <strong>Withdrawal Error:</strong> {error}\n                        </div>\n                    )}\n\n                    <div className=\"bg-gray-800/50 rounded-lg shadow-lg\">\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"min-w-full table-auto\">\n                                <thead className=\"bg-gray-700/50\">\n                                    <tr>\n                                        <th className=\"px-4 py-3 text-left font-semibold\">ID</th>\n                                        <th className=\"px-4 py-3 text-left font-semibold\">Requested At</th>\n                                        <th className=\"px-4 py-3 text-left font-semibold\">User Address</th>\n                                        <th className=\"px-4 py-3 text-left font-semibold\">Amount (USDT)</th>\n                                        <th className=\"px-4 py-3 text-left font-semibold\">Status</th> {/* 상태 열 추가 */}\n                                        <th className=\"px-4 py-3 text-left font-semibold\">Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"divide-y divide-gray-700\">\n                                    {isLoading ? (\n                                        <tr>\n                                            <td colSpan={6} className=\"text-center py-8\"> {/* colSpan 변경 */}\n                                                <div className=\"inline-block w-8 h-8 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin\"></div>\n                                                <p className=\"mt-2\">Loading Requests...</p>\n                                            </td>\n                                        </tr>\n                                    ) : withdrawals.length === 0 ? (\n                                        <tr>\n                                            <td colSpan={6} className=\"text-center py-8 text-gray-500\"> {/* colSpan 변경 */}\n                                                No withdrawal requests found.\n                                            </td>\n                                        </tr>\n                                    ) : (\n                                        withdrawals.map((req) => (\n                                            <tr key={req.id} className=\"hover:bg-gray-700/30\">\n                                                <td className=\"px-4 py-3\">{req.id}</td>\n                                                <td className=\"px-4 py-3 font-mono text-sm\">{new Date(req.requested_at).toLocaleString()}</td>\n                                                <td className=\"px-4 py-3 font-mono text-sm\">{req.user_address}</td>\n                                                <td className=\"px-4 py-3 font-bold text-yellow-300\">{req.amount.toFixed(4)}</td>\n                                                <td className=\"px-4 py-3\">\n                                                    <span className={`px-3 py-1 text-xs font-bold rounded-full ${\n                                                        req.status === 'PENDING' ? 'bg-yellow-600/50 text-yellow-200' :\n                                                        req.status === 'APPROVED' ? 'bg-green-600/50 text-green-200' :\n                                                        'bg-red-600/50 text-red-200'\n                                                    }`}>\n                                                        {req.status}\n                                                    </span>\n                                                </td>\n                                                <td className=\"px-4 py-3\">\n                                                    {req.status === 'PENDING' ? (\n                                                        <button\n                                                            onClick={() => handleApprove(req.id)}\n                                                            disabled={processingId === req.id}\n                                                            className=\"bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-md disabled:bg-gray-500 disabled:cursor-wait\"\n                                                        >\n                                                            {processingId === req.id ? 'Processing...' : 'Approve'}\n                                                        </button>\n                                                    ) : req.tx_hash ? (\n                                                        <a \n                                                            href={`https://testnet.bscscan.com/tx/${req.tx_hash}`} \n                                                            target=\"_blank\" \n                                                            rel=\"noopener noreferrer\"\n                                                            className=\"text-blue-400 hover:underline\"\n                                                        >\n                                                            View Tx\n                                                        </a>\n                                                    ) : (\n                                                        <span className=\"text-gray-500\">-</span>\n                                                    )}\n                                                </td>\n                                            </tr>\n                                        ))\n                                    )}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default AdminPage; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/coin_lotto/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/coin_lotto/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/coin_lotto/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}